<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <!-- 2024-02-28 노은하 -->
 <mapper namespace="com.test.mvc.IGroupDAO">
 
 	<select id="countGroupMember" resultType="java.lang.Integer">
 		SELECT COUNT(*) AS COUNT 
 		FROM GROUP_MEMBER GM JOIN GROUP_INVITE GI
 		ON GM.GI_CODE = GI.GI_CODE
 		WHERE CG_CODE = #{cg_code}
 		AND GM.GM_CODE NOT IN (SELECT GM_CODE FROM GROUP_WTHDR)
 	</select>
 	
 	<select id="countAttendMember" resultType="java.lang.Integer">
 		SELECT COUNT(*) AS ATTEND
 		FROM ATTEND_OPINION
 		WHERE MT_CODE = #{mt_code}
 		AND AOC_CODE = 1
 		AND GM_CODE NOT IN (SELECT GM_CODE FROM GROUP_WTHDR)
 	</select>
 	
 	<select id="countNotAttendMember" resultType="java.lang.Integer">
 		SELECT COUNT(*) AS NOT_ATTEND
 		FROM ATTEND_OPINION
 		WHERE MT_CODE = #{mt_code}
 		AND AOC_CODE = 2
 		AND GM_CODE NOT IN (SELECT GM_CODE FROM GROUP_WTHDR)
 	</select>
 	
 	<select id="searchAttendMemberList" resultType="com.test.mvc.GroupMemberDTO">
 		SELECT GM.GM_CODE AS GM_CODE, GM.GM_NICKNAME AS GM_NICKNAME
 		FROM ATTEND_OPINION AO, GROUP_MEMBER GM
 		WHERE AO.GM_CODE = GM.GM_CODE
 		AND AO.MT_CODE = #{mt_code}
 		AND AO.AOC_CODE = 1
 	</select>
 
 	<select id="searchNotAttendMemberList" resultType="java.util.ArrayList">
 		SELECT GM_CODE AS NOT_ATTEND_GM_CODE
 		FROM ATTEND_OPINION
 		WHERE MT_CODE = #{mt_code}
 		AND AOC_CODE = 2
 	</select>
 </mapper>
 